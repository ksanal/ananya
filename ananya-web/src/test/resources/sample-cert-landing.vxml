<?xml version="1.0" encoding="UTF-8"?>
<vxml version="2.1" xmlns="http://www.w3.org/2001/vxml"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.w3.org/2001/vxml http://www.w3.org/TR/voicexml21/vxml.xsd">

    <script src="http://dl.dropbox.com/u/37661559/sample-callerdata.js"/>
    <form id="landing_page">
        <block>
            <prompt>
                welcome to certificate course.
            </prompt>
        </block>

        <field name="repeat_reg" cond="callerData.isRegistered == 'true' &amp;&amp; callerData.bookmark == '{}'">
            <prompt bargein="false">
                you are already registered with no bookmarks. please dial 1 to repeat or 2 to continue.
            </prompt>
            <grammar mode="dtmf" version="1.0" root="root">
                <rule id="root" scope="public">
                    <one-of>
                        <item>1</item>
                        <item>2</item>
                    </one-of>
                </rule>
            </grammar>
            <filled>
                <if cond="repeat_reg == 1">
                    <goto next="#landing_page"/>
                    <elseif cond="repeat_reg == 2"/>
                    <goto next="http://dl.dropbox.com/u/37661559/nextflow.vxml"/>
                    <else/>
                    <reprompt/>
                </if>
            </filled>
            <nomatch>
                <reprompt/>
            </nomatch>
        </field>

        <block name="registered_bookmark_absent"
               cond="callerData.isRegistered == 'true' &amp;&amp; callerData.bookmark != '{}'">
            <prompt bargein="false">
                you are already registered with bookmarks. we are taking you to course.
            </prompt>
            <goto next="http://dl.dropbox.com/u/37661559/nextflow.vxml"/>
        </block>


        <field name="repeat_non_reg" cond="callerData.isRegistered == 'false'">
            <prompt bargein="false">
                you are not registered. please dial 1 to repeat or 2 to take you to registration.
            </prompt>

            <grammar mode="dtmf" version="1.0" root="root">
                <rule id="root" scope="public">
                    <one-of>
                        <item>1</item>
                        <item>2</item>
                    </one-of>
                </rule>
            </grammar>
            <filled>
                <if cond="repeat_non_reg == '1'">
                    <goto next="#landing_page"/>
                <elseif cond="repeat_non_reg == '2'"/>
                    <goto next="http://dl.dropbox.com/u/37661559/regflow.vxml"/>
                    <else/>
                    <reprompt/>
                </if>
            </filled>

        </field>

    </form>

</vxml>
<?xml version="1.0" encoding="UTF-8"?>
<vxml version="2.1" xmlns="http://www.w3.org/2001/vxml"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.w3.org/2001/vxml http://www.w3.org/TR/voicexml21/vxml.xsd">
    <form id="register_flw">

        <script>
            <![CDATA[
            var which_record = 'recordName';
          ]]>
        </script>

        <record id="recordName" cond="which_record =='recordName'"
                name="name"
                beep="true"
                maxtime="10s"
                finalsilence="4000ms"
                dtmfterm="true"
                type="audio/x-wav"
                >
            <grammar mode="dtmf" version="1.0" root="root">
                <rule id="root" scope="public">
                    <one-of>
                        <item>#</item>
                    </one-of>
                </rule>
            </grammar>
            <prompt timeout="5s" bargein="false">
                please say your name
            </prompt>
            <noinput>
                <prompt bargein="false">
                    please try and say something
                </prompt>
            </noinput>
        </record>

        <field name="confirmName" type="boolean">
            <prompt bargein="false">we heard it as
                <audio expr="name"/>.
                please press 1 to repeat
            </prompt>
            <grammar mode="dtmf" version="1.0" root="root">
                <rule id="root" scope="public">
                    <one-of>
                        <item>1</item>
                    </one-of>
                </rule>
            </grammar>
            <filled>
                <prompt>you have pressed 1</prompt>
                <if cond="confirmName">
                    <goto next="#register_flw"/>
                    <else/>
                    <script>
                        which_record = 'recordVillage';
                    </script>
                </if>
            </filled>
        </field>


        <record id="recordVillage"
                name="name"
                beep="true"
                maxtime="10s"
                finalsilence="4000ms"
                dtmfterm="true"
                type="audio/x-wav">
            <grammar mode="dtmf" version="1.0" root="root">
                <rule id="root" scope="public">
                    <one-of>
                        <item>#</item>
                    </one-of>
                </rule>
            </grammar>
            <prompt timeout="5s" bargein="false">
                please say your village
            </prompt>
            <noinput>
                <prompt bargein="false">
                    please try and say something
                </prompt>
            </noinput>
        </record>

        <field name="confirmVillage" type="boolean">
            <prompt bargein="false">we heard it as
                <audio expr="name"/>.
                please press 1 to repeat
            </prompt>
            <grammar mode="dtmf" version="1.0" root="root">
                <rule id="root" scope="public">
                    <one-of>
                        <item>1</item>
                    </one-of>
                </rule>
            </grammar>
            <filled>
                <prompt>you have pressed 1</prompt>
                <if cond="confirmVillage">
                    <goto next="#register_flw"/>
                </if>
            </filled>
        </field>

    </form>
</vxml>

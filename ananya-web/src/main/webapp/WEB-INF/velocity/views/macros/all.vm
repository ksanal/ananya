#macro(vxmlHeader)
<?xml version="1.0" encoding="UTF-8"?>
<vxml version="2.1" xmlns="http://www.w3.org/2001/vxml"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.w3.org/2001/vxml http://www.w3.org/TR/voicexml21/vxml.xsd">
#end

#macro(playwav $wav)
    <block>
        <audio src="$wav"/>
    </block>
#end

#macro(recordMSISDN)
    <var name="msisdn" expr="session.callerid"/>
#end

#macro(record $field $askwav $confirmwav $noinputwav)
    <record name="$field"
            beep="$bundle.flw.registration.beep"
            maxtime="$bundle.flw.registration.max.record.time"
            finalsilence="$bundle.flw.registration.finalsilence"
            dtmfterm="$bundle.flw.registration.dtmfterm"
            type="$bundle.flw.registration.record.audio.type">

        <grammar mode="dtmf" version="1.0" root="root">
            <rule id="root" scope="public">
                <one-of>
                    <item>$bundle.flw.registration.record.stop</item>
                </one-of>
            </rule>
        </grammar>
        <prompt timeout="$bundle.flw.registration.timeout">
            <audio src="$askwav"/>    
        </prompt>
        <noinput>
            <prompt>
                <audio src="$noinputwav"/>
            </prompt>
        </noinput>
        <filled>
            <prompt>
                <audio src="$confirmwav"/>
                <audio expr="$field"/>
            </prompt>
        </filled>
    </record>
#end

#macro(recordtts $field $asktext $confirmtext $noinputtext)
    <record name="$field"
            beep="$bundle.flw.registration.beep"
            maxtime="$bundle.flw.registration.max.record.time"
            finalsilence="$bundle.flw.registration.finalsilence"
            dtmfterm="$bundle.flw.registration.dtmfterm"
            type="$bundle.flw.registration.record.audio.type">

        <grammar mode="dtmf" version="1.0" root="root">
            <rule id="root" scope="public">
                <one-of>
                    <item>$bundle.flw.registration.record.stop</item>
                </one-of>
            </rule>
        </grammar>
        <prompt timeout="$bundle.flw.registration.timeout">
            $asktext
        </prompt>
        <noinput>
            <prompt>
                $noinputtext
            </prompt>
        </noinput>
        <filled>
            <prompt>
                $confirmtext
                <audio expr="$field"/>
            </prompt>
        </filled>
    </record>
#end


#macro(vxmlFooter)
</vxml>
#end